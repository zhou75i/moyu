<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>æ‘¸é±¼æ—¥å† - ä»Šæ—¥æ‘¸é±¼æŒ‡æ•°æŸ¥è¯¢</title>
<link rel="icon" href="https://p11-flow-imagex-download-sign.byteimg.com/tos-cn-i-a9rns2rl98/c01d92765d2347e09d90fd49a77a4f78.png~tplv-a9rns2rl98-24:720:720.png?rcl=20251215100001A584EFD9823593800EC1&rk3s=8e244e95&rrcfp=8a172a1a&x-expires=1766368801&x-signature=OlP5jrWMqe0gNCSTEqzKKwMjnXU%3D" type="image/png" sizes="32x32">
<link rel="shortcut icon" href="https://p11-flow-imagex-download-sign.byteimg.com/tos-cn-i-a9rns2rl98/c01d92765d2347e09d90fd49a77a4f78.png~tplv-a9rns2rl98-24:720:720.png?rcl=20251215100001A584EFD9823593800EC1&rk3s=8e244e95&rrcfp=8a172a1a&x-expires=1766368801&x-signature=OlP5jrWMqe0gNCSTEqzKKwMjnXU%3D" type="image/png">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<style>
:root{
  --bg:#f5f5f5;
  --ink:#111;
  --gray:#666;
  --border:#222;
  --fish-index-color: #ff7f00;
  --footer-note-color: #999;
}
body{
  margin:0;
  padding:20px;
  background:#ddd;
  font-family:"Microsoft YaHei",sans-serif;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 15px;
  max-width: 1400px;
  margin: 0 auto;
}
@media (min-width: 768px) {
  body {
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-start;
    padding: 20px 40px;
  }
  .right-container {
    margin-left: 20px;
    display: flex;
    flex-direction: column;
    gap: 15px;
    flex-shrink: 0;
    width: 450px;
  }
  .right-info-panel {
    background: var(--bg);
    border: 3px solid var(--border);
    border-radius: 14px;
    padding: 15px;
    width: 450px;
    height: 400px;
    box-sizing: border-box;
    overflow: hidden;
  }
  .export-btn-wrapper {
    width: 450px;
    margin-top: 0;
  }
  .poster {
    width: 640px !important;
    flex-shrink: 0;
  }
  @media (max-width: 1110px) {
    .right-container {
      display: none;
    }
  }
}
.export-btn-wrapper {
  width: 100%;
  max-width: 200px;
  margin-top: 10px;
}
.export-btn-wrapper button {
  width: 100%;
  padding: 12px 8px;
  border-radius: 10px;
  border: 2px solid var(--border);
  background: #fff;
  box-sizing: border-box;
  cursor: pointer;
  font-size: 16px;
}
.right-info-panel {
  display: none;
}
@media (min-width: 768px) {
  .right-info-panel {
    display: block;
  }
}
.right-info-panel .calendar-title {
  font-size: 18px;
  font-weight: bold;
  margin: 0 0 10px 0;
  padding-bottom: 8px;
  border-bottom: 2px solid var(--border);
  text-align: left;
}
.right-info-panel .quote-title {
  font-size: 16px;
  color: var(--gray);
  margin: 10px 0 5px 0;
  text-align: left;
}
.right-info-panel .quote-content {
  font-size: 14px;
  line-height: 1.5;
  margin-bottom: 10px;
  text-align: left;
  word-wrap: break-word;
  word-break: break-all;
  white-space: normal;
}
.right-info-panel .lunar-data {
  font-size: 12px;
  line-height: 1.8;
  background: #f0f0f0;
  padding: 8px;
  border-radius: 8px;
  margin-top: 10px;
  text-align: left;
}
.poster{
  max-width: 640px;
  width: 100%;
  margin:0;
  background:var(--bg);
  border:3px solid var(--border);
  border-radius:14px;
  padding:14px;
  position:relative;
  box-sizing: border-box;
}
.moyu-title-mobile {
  text-align: center;
  margin: 0 0 10px 0;
}
.title-big-mobile {
  font-size: 40px;
  font-weight: bold;
  color: var(--ink);
  letter-spacing: 8px;
  margin: 0;
}
.title-pinyin-mobile {
  font-size: 16px;
  color: var(--gray);
  margin: 4px 0 0 0;
  letter-spacing: 2px;
}
.title-big {
  font-size: 48px;
  font-weight: bold;
  color: #fff;
  letter-spacing: 12px;
  margin: 0;
  display: none;
}
.title-pinyin {
  font-size: 14px;
  color: #ddd;
  margin: 6px 0 0 0;
  letter-spacing: 2px;
  display: none;
}
@media (min-width: 768px) {
  .moyu-title-mobile {
    display: none;
  }
  .title-big, .title-pinyin {
    display: block;
  }
}
.topbar{
  font-size:12px;
  color:var(--gray);
  display:flex;
  justify-content:space-between;
  margin-bottom: 8px;
  align-items:center;
}
.top-gif {
  width:30px;
  height:30px;
  margin-right:8px;
  border-radius:4px;
}
.main-title{
  background:#222;
  color:#fff;
  border-radius:14px;
  padding:16px 20px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin:12px 0;
  height: 140px;
  box-sizing: border-box;
}
.date-week-wrapper {
  display: flex;
  align-items: center;
  gap: 15px;
  padding-left: 10px;
}
.date-left {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: flex-start;
}
.date-year-month {
  font-size: 18px;
  color: #fff;
  margin-bottom: 4px;
}
.date-num {
  font-size: 72px;
  font-weight: bold;
  line-height: 1;
  margin: 0;
}
.week-vertical {
  font-size: 20px;
  writing-mode: vertical-rl;
  text-orientation: upright;
  letter-spacing: 6px;
  display: flex;
  justify-content: center;
  align-items: center;
}
.title-center {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  flex: 1;
  padding: 0 20px;
}
.weekend-right {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  text-align: center;
  width: 80px;
  padding-right: 10px;
}
.weekend-num {
  font-size: 32px;
  font-weight: bold;
  margin: 6px 0;
  line-height: 1;
}
.info-block {
  display:flex;
  align-items:stretch;
  gap:15px;
  border:2px solid var(--border);
  border-radius:12px;
  padding:15px;
  margin-top:10px;
  box-sizing: border-box;
  min-height: 200px;
}
.info-text {
  flex:1;
  display: flex;
  flex-direction: column;
  gap: 2px !important;
  align-items: flex-start;
  justify-content: space-between;
  height: 100%;
}
@media (min-width: 768px) {
  .info-text-top {
    margin-bottom: auto;
    padding-top: 0;
  }
  .info-text-middle {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: flex-start;
  }
  .info-text-bottom {
    margin-top: auto;
    padding-bottom: 0;
    align-self: flex-start;
    margin-bottom: 0;
  }
  .info-img {
    align-self: flex-start;
    margin-bottom: 0;
  }
}
.fish-index-number {
  color: var(--fish-index-color);
  font-weight: bold;
}
.info-img {
  width: auto;
  height: 100%;
  max-height: 190px;
  max-width: 190px;
  object-fit:contain;
  border-radius:8px;
  flex-shrink: 0;
  align-self: flex-start;
  margin-bottom: 0;
}
@media (max-width: 767px) {
  .info-img {
    display: none !important;
  }
  .info-block {
    min-height: auto;
    align-items: flex-start;
  }
  .info-text {
    justify-content: flex-start;
    height: auto;
  }
  .info-text-top, .info-text-middle, .info-text-bottom {
    margin: 0;
    flex: none;
  }
}
#lunar {
  margin: 0 !important;
  padding: 0 !important;
  line-height: 1.4 !important;
}
#todaySpecial {
  margin: 2px 0 !important;
  padding: 0 !important;
  line-height: 1.6 !important;
  font-size: 15px !important;
}
#fortune {
  margin-top: 4px !important;
  line-height: 1.4 !important;
}
#fishLevel {
  margin-top: 4px !important;
}
#zodiac {
  margin-top: 4px !important;
}
.block{
  border:2px solid var(--border);
  border-radius:12px;
  padding:10px;
  margin-top:10px;
  box-sizing: border-box;
}
.block h3{
  margin:0 0 6px 0;
  font-size:14px;
}
.pill{
  display:inline-block;
  border:2px solid var(--border);
  border-radius:999px;
  padding:4px 10px;
  font-size:13px;
  margin:4px 4px 0 0;
}
.illustration{
  display:none;
}
.footer{
  margin-top:10px;
  font-size:14px;
  border-top:2px solid var(--border);
  padding-top:6px;
  line-height:1.6;
}
.footer-note {
  color: var(--footer-note-color);
  font-size:13px;
}
.poster button {
  display: none;
}
.timeline-container {
  display: flex;
  gap: 10px;
  margin-top: 10px;
}
.timeline-container .block {
  flex: 1;
  margin-top: 0;
}
@media (max-width: 767px) {
  .poster {
    max-width: 100%;
    padding: 10px;
  }
  .main-title {
    height: 120px;
    padding: 10px 15px;
  }
  .date-year-month {
    font-size: 14px;
  }
  .date-num {
    font-size: 60px;
  }
  .weekend-num {
    font-size: 28px;
  }
  .week-vertical {
    font-size: 18px;
  }
  .date-week-wrapper {
    gap: 10px;
  }
  .top-gif {
    width:25px;
    height:25px;
  }
  .main-title {
    height: auto;
    min-height: 100px;
    flex-wrap: wrap;
  }
  .title-center {
    padding: 0;
    margin-top: 10px;
    width: 100%;
    order: 3;
  }
  .date-week-wrapper {
    width: 60%;
  }
  .weekend-right {
    width: 30%;
    padding-right: 0;
  }
}
</style>
</head>
<body>
  <div class="poster" id="poster">
    <div class="moyu-title-mobile">
      <h1 class="title-big-mobile">æ‘¸é±¼æ—¥å†</h1>
      <p class="title-pinyin-mobile">jin tian ni mo yu le ma?</p>
    </div>

    <div class="topbar">
      <div style="display:flex;align-items:center;">
        <img class="top-gif" src="https://xximg1.meitudata.com/wechat-program/693e5bf550fd1bl4gs928f7732.gif" alt="æ‘¸é±¼GIF">
        <div>æ‘¸é±¼å“²å­¦ï¼šæ‘¸é±¼æ˜¯èŒåœºæ™ºæ…§ï¼Œä¸æ˜¯æ€åº¦é—®é¢˜</div>
      </div>
      <div>å…¬ä¼—å·ï¼šæŸ’å¾</div>
    </div>

    <div class="main-title">
      <div class="date-week-wrapper">
        <div class="date-left">
          <div class="date-year-month" id="yearMonth">2025å¹´12æœˆ</div>
          <div class="date-num" id="dayNum">14</div>
        </div>
        <div class="week-vertical" id="week">æ˜ŸæœŸæ—¥</div>
      </div>
      <div class="title-center">
        <h1 class="title-big">æ‘¸é±¼æ—¥å†</h1>
        <p class="title-pinyin">jin tian ni mo yu le ma?</p>
      </div>
      <div class="weekend-right">
        <div>è·ç¦»å‘¨æœ«</div>
        <div class="weekend-num" id="weekend"></div>
        <div id="weekendText">å°±æ˜¯ä»Šå¤©</div>
      </div>
    </div>

    <div class="info-block">
      <div class="info-text">
        <div class="info-text-top">
          <h3 id="lunar">ğŸ“… ä»Šæ—¥æ˜¯å‘¨æœ«</h3>
        </div>
        <div class="info-text-middle">
          <div id="todaySpecial" style="font-size: 15px;"></div>
        </div>
        <div class="info-text-bottom">
          <div id="fortune">æ‘¸é±¼æ—¶è®°å¾—å±è”½è€æ¿ï¼Œè´¢è¿+1</div>
          <div id="fishLevel" class="pill">æ‘¸é±¼æŒ‡æ•° <span class="fish-index-number">77%</span> ï½œ ğŸ¡ ç†Ÿç»ƒå·¥</div>
          <div id="zodiac">â­ æ‘©ç¾¯åº§ï¼šå°å¿ƒæ‘¸é±¼è¢«æŠ“</div>
        </div>
      </div>
      <img class="info-img" id="randomFishImg" src="https://xximg1.meitudata.com/wechat-program/693e5bf199b7fhsdrc1q4e1153.jpg" alt="æ‘¸é±¼å›¾ç‰‡">
    </div>

    <div class="illustration">ğŸŸ</div>

    <div class="timeline-container">
      <div class="block" id="timeline">
        <h3>ğŸ”” ä»Šæ—¥æ‘¸é±¼æ—¶é—´è½´</h3>
        <div style="font-size:13px;line-height:1.8">
          09:00 ä¼ªè£…ä¸Šç­<br>
          10:30 å‡è£…æ€è€ƒ<br>
          11:30 ä¸Šåˆæ‘¸é±¼<br>
          14:00 åˆåçŠ¯å›°<br>
          16:00 æ·±åº¦æ‘¸é±¼<br>
          17:30 å‡†å¤‡è·‘è·¯
        </div>
      </div>

      <div class="block" id="salary-countdown">
        <h3>ğŸ’° å‘å·¥èµ„å€’è®¡æ—¶</h3>
        <div style="font-size:13px;line-height:1.8" id="salaryDays">æœˆåˆï¼š18å¤©<br>10å·ï¼š27å¤©<br>15å· ï¼šæ˜å¤©å‘ï¼ğŸ¥³<br>20å·ï¼š6å¤©<br>25å·ï¼š11å¤©<br>æœˆåº•ï¼š17å¤©<br></div>
      </div>
    </div>

    <div class="block" id="festival"><h3>ğŸ‰ èŠ‚æ—¥å€’è®¡æ—¶</h3><span class="pill">å…ƒæ—¦ï¼š18å¤©</span><span class="pill">æ˜¥èŠ‚ï¼š46å¤©</span><span class="pill">æ¸…æ˜ï¼š112å¤©</span><span class="pill">åŠ³åŠ¨èŠ‚ï¼š138å¤©</span><span class="pill">ç«¯åˆï¼š168å¤©</span><span class="pill">ä¸­ç§‹ï¼š296å¤©</span><span class="pill">å›½åº†ï¼š291å¤©</span></div>

    <div class="footer" id="footerText">
      <span id="footer-quote"></span><br>
      <span class="footer-note">æœ¬é¡µé¢ä»…ä¾›ç²¾ç¥æ”¾æ¾ä½¿ç”¨ï¼Œå¯¹è€æ¿æ— æ•ˆã€‚</span>
    </div>
  </div>

  <div class="right-container">
    <div class="right-info-panel">
      <div class="calendar-title" id="pc-calendar-title">2025-12-14 / æ˜ŸæœŸæ—¥</div>
      <div class="quote-title">æ‰“å·¥äººè¯­å½•</div>
      <div class="quote-content" id="pc-quote-content"></div>
      <div class="lunar-data" id="pc-lunar-data"></div>
    </div>

    <div class="export-btn-wrapper">
      <button onclick="exportImg()">å¯¼å‡ºå›¾ç‰‡</button>
    </div>
  </div>

<script src="https://cdn.jsdelivr.net/npm/solarlunar@2.0.7/lib/solarlunar.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script>
const LunarCalculator = {
  getLunarInfo: function(date) {
    const year = date.getFullYear();
    const month = date.getMonth() + 1;
    const day = date.getDate();
    const lunarData = solarlunar.solar2lunar(year, month, day);
    
    return {
      lunarYear: lunarData.yearCn || year,
      lunarMonth: lunarData.monthCn || '',
      lunarDay: lunarData.dayCn || '',
      gzYear: lunarData.gzYear || '',
      gzMonth: lunarData.gzMonth || '',
      gzDay: lunarData.gzDay || '',
      animal: lunarData.animal || '',
      term: lunarData.term || 'æ— ',
      isLeap: lunarData.isLeap || false,
      ncWeek: lunarData.ncWeek || ''
    };
  },
  
  formatLunarHtml: function(lunarInfo) {
    return `
      ğŸ“… å†œå†ï¼š${lunarInfo.lunarYear} ${lunarInfo.lunarMonth}${lunarInfo.lunarDay}<br>
      ğŸŒ¿ å¤©å¹²åœ°æ”¯ï¼š${lunarInfo.gzYear || 'æœªçŸ¥'}å¹´ ${lunarInfo.gzMonth || 'æœªçŸ¥'}æœˆ ${lunarInfo.gzDay || 'æœªçŸ¥'}æ—¥<br>
      ğŸ² ç”Ÿè‚–ï¼š${lunarInfo.animal || 'æœªçŸ¥'} | èŠ‚æ°”ï¼š${lunarInfo.term}<br>
      ğŸ“† é—°æœˆï¼š${lunarInfo.isLeap ? 'æ˜¯' : 'å¦'}
    `;
  },
  
  getLunarDisplayText: function(lunarInfo, isWeekend) {
    return isWeekend ? `ğŸ“… ä»Šæ—¥æ˜¯å‘¨æœ«` : `ğŸ“… æ‘¸é±¼æ€»ç»åŠæé†’æ‚¨`;
  }
};
</script>

<script>
const today = new Date();
const weekDays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
const lunarInfo = LunarCalculator.getLunarInfo(today);

const fishImgList = [
  'https://xximg1.meitudata.com/wechat-program/693e5bf1688897bivh8u605913.jpg',
  'https://xximg1.meitudata.com/wechat-program/693e5bf19ebbd9t5mu2zzc9443.jpg',
  'https://xximg1.meitudata.com/wechat-program/693e5bf1947e1ur17sr4i37516.jpg',
  'https://xximg1.meitudata.com/wechat-program/693e5bf1989d2m0bumtx1l8208.jpg',
  'https://xximg1.meitudata.com/wechat-program/693e5bf199b7fhsdrc1q4e1153.jpg'
];

const dayOfWeek = today.getDay();
const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;
let weekendDays = 7 - dayOfWeek - (dayOfWeek === 0 ? 7 : 0);

function getTimeGreeting() {
  const hour = new Date().getHours();
  if (hour >= 5 && hour < 9) return 'æ—©ä¸Šå¥½';
  if (hour >= 9 && hour < 12) return 'ä¸Šåˆå¥½';
  if (hour >= 12 && hour < 14) return 'ä¸­åˆå¥½';
  if (hour >= 14 && hour < 18) return 'ä¸‹åˆå¥½';
  return 'æ™šä¸Šå¥½';
}

const allQuotes = [
  'å¥¥å¾·å½ªè‡³æ­»éƒ½è®¤ä¸ºä»–ç”Ÿæ´»è¿‡å¾—ä¸å¥½æ˜¯å› ä¸ºé¦™è•‰æ‹‰å¾—ä¸å¤Ÿå¤š',
  'æƒ³ä¹°ä¸€ä»¶ç¾½ç»’æœï¼Œä½†æ˜¯999æ„Ÿå†’çµæ‰22å—é’±ï¼Œäºæ˜¯æˆ‘åˆç©¿ç€çŸ­è£¤å‡ºé—¨äº†ï¼æ—©å®‰ï¼Œæ‰“å·¥äººï¼',
  'æˆ‘çœŸçš„å¤ªå–œæ¬¢ä¸Šç­äº†ï¼Œè¿™ç§ä½äººä¸€ç­‰ï¼Œç´¯æ­»ç´¯æ´»è¿˜èµšä¸åˆ°é’±çš„æ„Ÿè§‰ï¼ŒçœŸçš„å¤ªè®©äººç€è¿·äº†',
  'å·¥èµ„å°±åƒå¤§å§¨å¦ˆï¼Œä¸€ä¸ªæœˆæ¥ä¸€æ¬¡ï¼Œä¸€ä¸ªæ˜ŸæœŸå·¦å³å°±æ²¡äº†ã€‚',
  'å°æ—¶å€™ä¸æ˜ç™½ç« é±¼å“¥å¤©å¤©ä¸Šç­ä¸ºä»€ä¹ˆæ‹‰ç€ä¸ªè„¸ï¼Œç›´åˆ°æˆ‘å¤©å¤©ä¸Šç­æˆ‘æ‰æ˜ç™½',
  'ä»€ä¹ˆå«ä¸‡æ­»ä¸è¾ï¼Œå°±æ˜¯æ¯å¤©è¢«æ°”æ­»ä¸€ä¸‡æ¬¡ï¼Œä¾ç„¶ä¸è¾èŒã€‚',
  'ä½ æ¯å¤©éƒ½å¾ˆå¿™çš„æ ·å­ï¼Œå¯æ˜¯ä½ åˆç©·ï¼Œæ‰€ä»¥ä½ åœ¨å¿™ä»€ä¹ˆï¼Ÿ',
  'å»çœ‹ç‰™ï¼Œç‰™åŒ»é—®æˆ‘å¹´çºªè½»è½»çš„ç‰™é½¿æ€ä¹ˆç£¨æŸè¿™ä¹ˆä¸¥é‡ï¼Ÿæˆ‘è¯´è¿™äº›å¹´ï¼Œæˆ‘éƒ½æ˜¯å’¬ç€ç‰™è¿‡æ¥çš„ã€‚',
  'åŠå…¬å®¤ä¸ºä»€ä¹ˆä¸€ç›´å¼¥æ¼«ç€ä¸€è‚¡æµ·é²œå‘³ï¼ŸåŸæ¥éƒ½æ˜¯ä½ ä»¬åœ¨æ‘¸é±¼ï¼Ÿ',
  'ä¸–ç•Œä¸Šæœ€ç—›è‹¦çš„ä¸‰ä»¶äº‹ï¼šä¸Šç­ã€æ—©èµ·ä¸ºäº†ä¸Šç­ã€æ—©ç¡ä¸ºäº†æ—©èµ·ä¸Šç­',
  'çš®é©å‚ä¼šå€’ï¼Œå°å§¨å­ä¼šè·‘ï¼Œåªæœ‰ä½ æ‰“å·¥åˆ°è€ï¼åŠ æ²¹æ‰“å·¥äººï¼',
  'å½“æˆ‘ä¸€è§‰é†’æ¥ç²¾ç¥ç„•å‘ï¼Œæˆ‘å°±çŸ¥é“ï¼Œæˆ‘è¿Ÿåˆ°äº†ã€‚',
  'ä¸Šç­å‰ï¼šæˆ‘çœŸçš„å¾ˆéœ€è¦è¿™ä»½å·¥ä½œï¼›ä¸Šç­åï¼šé‚£ä½ å»å¼€é™¤æˆ‘å•Š',
  'ä¸Šç­è¿˜æ²¡æœ‰å­˜æ¬¾çš„äººé‚£éƒ½å«è‡ªè´¹æ‰“å·¥',
  'æ‘¸é±¼æ—¶ï¼šè¿™é’±è¿˜æŒºå¥½èµšï¼›è®¤çœŸå·¥ä½œæ—¶ï¼šä½ ä»–å¦ˆçš„ç»™æˆ‘å‡ ä¸ªé’±å•Š',
  'æœ‰äººç›¸çˆ±ï¼Œæœ‰äººå¤œé‡Œçœ‹æµ·ï¼Œæœ‰äººä¸ƒå…«ä¸ªé—¹é’Ÿèµ·ä¸æ¥',
  'æ‰“å·¥æ‰“å·¥ä¸¤æ‰‹ç©ºç©ºï¼Œé—¹é’Ÿä¸€å“å°±è¦å¼€å·¥',
  'ä¸Šè¾ˆå­ä½œæ¶å¤šç«¯ï¼Œè¿™è¾ˆå­æ—©èµ·ä¸Šç­',
  'æ¯è—¤è€æ ‘æ˜é¸¦ï¼Œä¸Šç­æ‘¸é±¼ï¼Œä¸‹ç­å›å®¶',
  'å¤é“è¥¿é£ç˜¦é©¬ï¼Œè€æ¿åè½¦ï¼Œæˆ‘éª‘çˆ±ç›',
  'æ‰“å·¥çš„å¿«ä¹æ˜¯ä½ æƒ³è±¡ä¸åˆ°çš„ï¼Œå› ä¸ºæ‰“å·¥æ ¹æœ¬å°±æ²¡æœ‰å¿«ä¹',
  'æˆ‘ä¸Šç­é¢†çš„ä¸æ˜¯è–ªæ°´ï¼Œè€Œæ˜¯ç²¾ç¥æŸå¤±è´¹',
  'ä¸–ç•Œä¸Šåªæœ‰ä¸€ç§è‹±é›„ä¸»ä¹‰ï¼Œé‚£å°±æ˜¯æ—©èµ·ä¸Šç­ã€‚',
  'åŠªåŠ›ä¸ä¸€å®šè¢«çœ‹åˆ° ä½†æ‘¸é±¼ä¼‘æ¯ä¸€å®šä¼šã€‚',
  'æ¯å¤©æ—©ä¸Šç¡ç€éƒ½è¦éª‚è‡ªå·±å‡ å¥ï¼Œæ€ä¹ˆæ‰¾äº†ä¸ªæ—©å…«çš„å·¥ä½œ',
  'ä»Šå¤©æ‰“å·¥ä¸åŠªåŠ›ï¼Œæ˜æ—¥å›æ‘æ°è‹ç±³',
  'åªè¦æˆ‘ä¸€ç›´ä¸åŠªåŠ›ï¼Œè€æ¿ï¼Œå°±è¿‡ä¸ä¸Šä»–æƒ³è¦çš„ç”Ÿæ´»',
  'è£…æ¨¡åšæ ·ä¸Šç­ï¼ŒçœŸå¿ƒå®æ„ä¸‹ç­',
  'æ—¥å¸¸å››ä¸ªæœŸç›¼ï¼šç­‰å‘¨äº”ã€ç­‰ä¸‹ç­ã€ç­‰å¿«é€’ã€ç­‰å‘å·¥èµ„',
  'é‡‘çªé“¶çªä¸å¦‚æˆ‘çš„åŠå…¬æ¡Œ',
  'é”„ç¦¾æ—¥å½“åˆï¼Œæ‰“å·¥å¥½è¾›è‹¦',
  'æ”¾å‡å‘çš„æœ‹å‹åœˆå«æœ‹å‹åœˆï¼Œä¸Šç­å‘çš„æœ‹å‹åœˆå«åŠ³æ”¹æ—¥è®°',
  'æˆ‘ä¸Šç­çš„æ€¨æ°”å¯ä»¥å¤æ´»åä¸ªé‚ªå‰‘ä»™',
  'ä½™é¢ï¼šä½ æœ€å¥½åˆ›é€ å¿ƒæƒ…',
  'ä»Šæ—¥å¿ƒæƒ…ï¼šæ²¡å¿ƒæƒ…å·¥ä½œ',
  'ç”Ÿæ´»ä¸æ˜¯å¡é€šï¼Œè¯·ä½ èµ·åºŠæ‰“å·¥ã€‚',
  'äººä¹‹åˆæ€§æœ¬å–„ ä¸æƒ³ä¸Šç­æ€ä¹ˆåŠ',
  'å¦‚æœåç‰¢æœ‰å¹³æ›¿ï¼Œé‚£ä¸€å®šæ˜¯ä¸Šç­ã€‚',
  'åˆšå–äº†ä¸€æ¯ç¾å¼ï¼Œå¥½è‹¦ï¼Œè·Ÿæˆ‘çš„å‘½ä¸€æ ·è‹¦ã€‚',
  'æ¼«é•¿çš„å²æœˆ ç«Ÿæ²¡æœ‰ä¸€å¤©é€‚åˆä¸Šç­',
  'æ²¡æœ‰å›°éš¾çš„å·¥ä½œï¼Œåªæœ‰å‹‡æ•¢çš„æ‰“å·¥äºº',
  'æ‰“å·¥åªæ˜¯ä¸€åœºæˆï¼Œå¤§å®¶å› ä¸ºè´«å›°è€Œç›¸èš',
  'æ—©ä¸Šå¤šç¡äº†äº”åˆ†é’Ÿï¼Œç”µåŠ¨è½¦éƒ½èƒ½æ‹§å†’çƒŸ',
  'ä¸€æ˜ŸæœŸ æ€»æœ‰é‚£ä¹ˆ5å¤©æ‘¸é±¼ä¸Šç­',
  'è‘¡è„é…’å¼€äº†éƒ½è¦é†’äº”åˆ†é’Ÿï¼Œäººé†’äº†å´è¦ç«‹åˆ»å»ä¸Šç­',
  'åŠ ç­ä¸æ˜¯ç¦æŠ¥ æ‘¸é±¼æ‰æ˜¯ç‹é“'
];

// åŸºç¡€ä¿¡æ¯æ¸²æŸ“
document.getElementById('yearMonth').innerText = `${today.getFullYear()}å¹´${today.getMonth() + 1}æœˆ`;
const currentWeekText = `æ˜ŸæœŸ${weekDays[dayOfWeek]}`;
document.getElementById('week').innerText = currentWeekText;
document.getElementById('dayNum').innerText = today.getDate();

if(isWeekend) {
  document.getElementById('weekend').innerText = '';
  document.getElementById('weekendText').innerText = 'å°±æ˜¯ä»Šå¤©';
} else {
  document.getElementById('weekend').innerText = weekendDays;
  document.getElementById('weekendText').innerText = 'å¤©';
}

document.getElementById('lunar').innerText = LunarCalculator.getLunarDisplayText(lunarInfo, isWeekend);

// é—®å€™è¯­
const greeting = getTimeGreeting();
const greetingText = `${greeting}ï¼Œæ‘¸é±¼äººï¼å·¥ä½œå†å¿™ä¸€å®šä¸è¦å¿˜è®°ä¼‘æ¯å“¦ï¼èµ·èº«å»èŒ¶æ°´é—´ï¼Œå»å•æ‰€èµ°èµ°ï¼Œé’±æ˜¯è€æ¿çš„ä½†å‘½æ˜¯è‡ªå·±çš„ï¼Œç¥æ„¿æ‘¸é±¼äººæ„‰å¿«çš„æ¸¡è¿‡æ¯ä¸€å¤©...`;
document.getElementById('todaySpecial').innerText = greetingText;

// æ‘¸é±¼æŒ‡æ•°
const fishIndex = Math.floor(Math.random() * 100) + 1;
let fishLevelText = '';
if(fishIndex >= 100) fishLevelText = 'ğŸ  é±¼ç‹';
else if(fishIndex >= 90) fishLevelText = 'ğŸ¦ˆ é±¼é²¨';
else if(fishIndex >= 80) fishLevelText = 'ğŸŸ è€æ²¹æ¡';
else if(fishIndex >= 70) fishLevelText = 'ğŸ¡ ç†Ÿç»ƒå·¥';
else fishLevelText = 'ğŸ£ æ–°æ‰‹';

const fishLevelHtml = isWeekend 
  ? `æ‘¸é±¼æŒ‡æ•° <span class="fish-index-number">${fishIndex}%</span> ï½œ ${fishLevelText}` 
  : `ğŸŸ æ‘¸é±¼æŒ‡æ•° <span class="fish-index-number">${fishIndex}%</span> ï½œ ${fishLevelText}`;
document.getElementById('fishLevel').innerHTML = fishLevelHtml;

// æ˜Ÿåº§
const getZodiac = (month, day) => {
  const arr = [20,19,21,20,21,22,23,23,23,24,23,22];
  const zodiacs = ['æ°´ç“¶åº§','åŒé±¼åº§','ç™½ç¾Šåº§','é‡‘ç‰›åº§','åŒå­åº§','å·¨èŸ¹åº§','ç‹®å­åº§','å¤„å¥³åº§','å¤©ç§¤åº§','å¤©èåº§','å°„æ‰‹åº§','æ‘©ç¾¯åº§'];
  return day < arr[month-1] ? zodiacs[month-1] : zodiacs[month%12];
};
const zodiac = getZodiac(today.getMonth() + 1, today.getDate());
const zodiacQuotes = ['çµæ„Ÿçˆ†æ£šï¼Œå…ˆæ‘¸å†è¯´', 'æ‘¸é±¼éœ€è°¨æ…ï¼Œè€æ¿åœ¨é™„è¿‘', 'é€‚åˆæ‘¸é±¼ï¼Œä¸å®œå†…å·', 'æ‘¸é±¼æ•ˆç‡MAX', 'å°å¿ƒæ‘¸é±¼è¢«æŠ“'];
document.getElementById('zodiac').innerText = `â­ ${zodiac}ï¼š${zodiacQuotes[Math.floor(Math.random()*zodiacQuotes.length)]}`;

// è¿åŠ¿
const fortunes = ['ä»Šæ—¥å®œæ‘¸é±¼ï¼Œå¿Œè®¤çœŸå·¥ä½œ', 'æ‘¸é±¼æ—¶è®°å¾—å±è”½è€æ¿ï¼Œè´¢è¿+1', 'é€‚åˆå¸¦è–ªæ‹‰å±ï¼Œæ‘¸é±¼æŒ‡æ•°æ‹‰æ»¡', 'å°å¿ƒé¢†å¯¼çªå‡»æ£€æŸ¥ï¼Œå»ºè®®ä½è°ƒæ‘¸é±¼', 'æ‘¸é±¼è™½å¥½ï¼Œå¯ä¸è¦è´ªæ¯å“¦'];
document.getElementById('fortune').innerText = fortunes[Math.floor(Math.random()*fortunes.length)];

// éšæœºå›¾ç‰‡
const randomImgIndex = Math.floor(Math.random() * fishImgList.length);
document.getElementById('randomFishImg').src = fishImgList[randomImgIndex];

// PCç«¯å³ä¾§ä¿¡æ¯
const formattedDate = `${today.getFullYear()}-${String(today.getMonth()+1).padStart(2,0)}-${String(today.getDate()).padStart(2,0)}`;
document.getElementById('pc-calendar-title').innerText = `${formattedDate} / æ˜ŸæœŸ${weekDays[dayOfWeek]}`;
document.getElementById('pc-lunar-data').innerHTML = LunarCalculator.formatLunarHtml(lunarInfo);

// å‘è–ªæ—¥è®¡ç®—
const calculateSalaryDays = () => {
  const currentDay = today.getDate();
  const currentMonth = today.getMonth();
  const currentYear = today.getFullYear();
  const lastDayOfMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
  
  const salaryConfigs = [
    { name: 'æœˆåˆ', day: 1 },
    { name: '10å·', day: 10 },
    { name: '15å·', day: 15 },
    { name: '20å·', day: 20 },
    { name: '25å·', day: 25 },
    { name: 'æœˆåº•', day: lastDayOfMonth }
  ];
  
  let html = '';
  salaryConfigs.forEach(item => {
    let targetDate, diffDays;
    if (currentDay <= item.day) {
      targetDate = new Date(currentYear, currentMonth, item.day);
    } else {
      const nextMonth = currentMonth + 1;
      const nextYear = nextMonth > 11 ? currentYear + 1 : currentYear;
      const nextMonthAdjust = nextMonth > 11 ? 0 : nextMonth;
      const targetDay = item.name === 'æœˆåº•' 
        ? new Date(nextYear, nextMonthAdjust + 1, 0).getDate() 
        : item.day;
      targetDate = new Date(nextYear, nextMonthAdjust, targetDay);
    }
    
    diffDays = Math.ceil((targetDate.getTime() - today.getTime()) / (1000 * 3600 * 24));
    
    let displayText = '';
    if (diffDays === 0) displayText = `${item.name}ï¼šä»Šå¤©å‘è–ªï¼ğŸ‰`;
    else if (diffDays === 1) displayText = `${item.name}ï¼šæ˜å¤©å‘ï¼ğŸ¥³`;
    else if (diffDays < 0) displayText = `${item.name}ï¼šå·²å‘è–ª âœ…`;
    else displayText = `${item.name}ï¼š${diffDays}å¤©`;
    
    html += `${displayText}<br>`;
  });
  
  return html;
};

document.getElementById('salaryDays').innerHTML = calculateSalaryDays();

// èŠ‚æ—¥å€’è®¡æ—¶
const fesDiv = document.getElementById('festival');
fesDiv.innerHTML = '<h3>ğŸ‰ èŠ‚æ—¥å€’è®¡æ—¶</h3>';

const getDiffDays = (targetDate) => {
  const timeDiff = targetDate.getTime() - today.getTime();
  return Math.ceil(timeDiff / (1000 * 3600 * 24));
};

const createDate = (year, month, day) => new Date(year, month - 1, day);

const festivals = [
  ['å…ƒæ—¦','solar',1,1],['æ˜¥èŠ‚','lunar',1,1],['æ¸…æ˜','solar',4,5],['åŠ³åŠ¨èŠ‚','solar',5,1],
  ['ç«¯åˆ','lunar',5,5],['ä¸­ç§‹','lunar',8,15],['å›½åº†','solar',10,1]
];

festivals.forEach(f => {
  let d;
  if(f[1] === 'solar') {
    d = createDate(today.getFullYear(), f[2], f[3]);
  } else {
    const r = solarlunar.lunar2solar(today.getFullYear(), f[2], f[3]);
    d = new Date(r.cYear, r.cMonth - 1, r.cDay);
  }
  if(d < today) d.setFullYear(d.getFullYear() + 1);
  fesDiv.innerHTML += `<span class="pill">${f[0]}ï¼š${getDiffDays(d)}å¤©</span>`;
});

// éšæœºè¯­å½•
const randomQuote = allQuotes[Math.floor(Math.random() * allQuotes.length)];
document.getElementById('footer-quote').innerText = randomQuote;
document.getElementById('pc-quote-content').innerText = randomQuote;

// å¯¼å‡ºå›¾ç‰‡
function exportImg() {
  const now = new Date();
  const year = now.getFullYear();
  const month = String(now.getMonth() + 1).padStart(2, '0');
  const day = String(now.getDate()).padStart(2, '0');
  const hours = String(now.getHours()).padStart(2, '0');
  const minutes = String(now.getMinutes()).padStart(2, '0');
  const seconds = String(now.getSeconds()).padStart(2, '0');
  
  const fileName = `${year}${month}${day}${hours}${minutes}${seconds}æ‘¸é±¼æ€»ç»åŠ.png`;
  
  html2canvas(document.getElementById('poster'), {
    scale: 2,
    useCORS: true,
    logging: false
  }).then(canvas => {
    const a = document.createElement('a');
    a.download = fileName;
    a.href = canvas.toDataURL('image/png');
    a.click();
  });
}
</script>

</body>
</html>
